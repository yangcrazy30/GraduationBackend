webpackHotUpdate(0,{

/***/ "./src/store/modules/account.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(\"./node_modules/babel-runtime/regenerator/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(\"./node_modules/babel-runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__api_account_account__ = __webpack_require__(\"./src/api/account/account.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__api_account_account__ = __webpack_require__(\"./src/api/account/account.js\");\n\n\n\n\n\nvar state = {\n  username: \"\",\n  role: \"\",\n  email: \"\",\n  avatar: \"\",\n  id: \"\"\n};\n\nvar getters = {\n  isLoggedIn: function isLoggedIn(state) {\n    return !!state.email && !!state.role;\n  }\n};\n\nvar actions = {\n  login: function login(_ref, _ref2) {\n    var _this = this;\n\n    var commit = _ref.commit,\n        getters = _ref.getters;\n    var email = _ref2.email,\n        password = _ref2.password;\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n      var _response, response;\n\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!getters.isLoggedIn) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              if (!localStorage.getItem(\"ujs\")) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 5;\n              return Object(__WEBPACK_IMPORTED_MODULE_2__api_account_account__[\"a\" /* getInfo */])();\n\n            case 5:\n              _response = _context.sent;\n\n              commit(\"login\", _response.data.data);\n              return _context.abrupt(\"return\");\n\n            case 8:\n              if (!(!email || !password)) {\n                _context.next = 10;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 10:\n              _context.next = 12;\n              return Object(__WEBPACK_IMPORTED_MODULE_2__api_account_account__[\"c\" /* login */])({ email: email, password: password });\n\n            case 12:\n              response = _context.sent;\n\n              localStorage.setItem(\"ujs\", response.data.data.token);\n              commit(\"login\", response.data.data);\n              return _context.abrupt(\"return\", response);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, _this);\n    }))();\n  },\n  logout: function logout(_ref3) {\n    var _this2 = this;\n\n    var commit = _ref3.commit;\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              commit(\"logout\");\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, _this2);\n    }))();\n  },\n  updateAvatar: function updateAvatar(_ref4) {\n    var _this3 = this;\n\n    var commit = _ref4.commit;\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee3() {\n      var userinfo;\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return Object(__WEBPACK_IMPORTED_MODULE_2__api_account_account__[\"a\" /* getInfo */])();\n\n            case 2:\n              userinfo = _context3.sent;\n\n              commit(\"login\", userinfo);\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, _this3);\n    }))();\n  },\n  changeUserInfo: function changeUserInfo(_ref5, userinfo) {\n    var _this4 = this;\n\n    var commit = _ref5.commit;\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4() {\n      var newuserinfo;\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return Object(__WEBPACK_IMPORTED_MODULE_2__api_account_account__[\"e\" /* updateUserInfo */])(userinfo);\n\n            case 2:\n              _context4.next = 4;\n              return Object(__WEBPACK_IMPORTED_MODULE_2__api_account_account__[\"a\" /* getInfo */])();\n\n            case 4:\n              newuserinfo = _context4.sent;\n\n              localStorage.setItem(\"ujs\", newuserinfo.data.data.token);\n              commit(\"login\", newuserinfo);\n\n            case 7:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, _this4);\n    }))();\n  }\n};\n\nvar mutations = {\n  login: function login(state, payload) {\n    state.email = payload.email;\n    state.username = payload.username;\n    state.role = payload.role;\n    state.avatar = payload.avatar;\n    state.id = payload.id;\n  },\n  logout: function logout(state) {\n    state.username = \"\";\n    state.role = \"\";\n    state.email = \"\";\n    state.avatar = \"\";\n    state.id = \"\";\n    localStorage.clear();\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RvcmUvbW9kdWxlcy9hY2NvdW50LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9zdG9yZS9tb2R1bGVzL2FjY291bnQuanM/NDU2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsb2dpbiwgZ2V0SW5mbywgdXBkYXRlVXNlckluZm8gfSBmcm9tIFwiQC9hcGkvYWNjb3VudC9hY2NvdW50XCI7XG5pbXBvcnQgeyBnZXRBdmF0YXIgfSBmcm9tIFwiLi4vLi4vYXBpL2FjY291bnQvYWNjb3VudFwiO1xuXG5jb25zdCBzdGF0ZSA9IHtcbiAgdXNlcm5hbWU6IFwiXCIsXG4gIHJvbGU6IFwiXCIsXG4gIGVtYWlsOiBcIlwiLFxuICBhdmF0YXI6IFwiXCIsXG4gIGlkOiBcIlwiXG59O1xuXG5jb25zdCBnZXR0ZXJzID0ge1xuICBpc0xvZ2dlZEluOiBzdGF0ZSA9PiB7XG4gICAgcmV0dXJuICEhc3RhdGUuZW1haWwgJiYgISFzdGF0ZS5yb2xlO1xuICB9XG59O1xuXG5jb25zdCBhY3Rpb25zID0ge1xuICBhc3luYyBsb2dpbih7IGNvbW1pdCwgZ2V0dGVycyB9LCB7IGVtYWlsLCBwYXNzd29yZCB9KSB7XG4gICAgaWYgKGdldHRlcnMuaXNMb2dnZWRJbikgcmV0dXJuO1xuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVqc1wiKSkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRJbmZvKCk7XG4gICAgICBjb21taXQoXCJsb2dpblwiLCByZXNwb25zZS5kYXRhLmRhdGEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkgcmV0dXJuO1xuXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgbG9naW4oeyBlbWFpbDogZW1haWwsIHBhc3N3b3JkOiBwYXNzd29yZCB9KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVqc1wiLCByZXNwb25zZS5kYXRhLmRhdGEudG9rZW4pO1xuICAgIGNvbW1pdChcImxvZ2luXCIsIHJlc3BvbnNlLmRhdGEuZGF0YSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LFxuICBhc3luYyBsb2dvdXQoeyBjb21taXQgfSkge1xuICAgIGNvbW1pdChcImxvZ291dFwiKTtcbiAgfSxcbiAgYXN5bmMgdXBkYXRlQXZhdGFyKHsgY29tbWl0IH0pIHtcbiAgICBjb25zdCB1c2VyaW5mbyA9IGF3YWl0IGdldEluZm8oKTtcbiAgICBjb21taXQoXCJsb2dpblwiLCB1c2VyaW5mbyk7XG4gIH0sXG4gIGFzeW5jIGNoYW5nZVVzZXJJbmZvKHsgY29tbWl0IH0sIHVzZXJpbmZvKSB7XG4gICAgYXdhaXQgdXBkYXRlVXNlckluZm8odXNlcmluZm8pO1xuICAgIGNvbnN0IG5ld3VzZXJpbmZvID0gYXdhaXQgZ2V0SW5mbygpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidWpzXCIsIG5ld3VzZXJpbmZvLmRhdGEuZGF0YS50b2tlbik7XG4gICAgY29tbWl0KFwibG9naW5cIiwgbmV3dXNlcmluZm8pO1xuICB9XG59O1xuXG5jb25zdCBtdXRhdGlvbnMgPSB7XG4gIGxvZ2luKHN0YXRlLCBwYXlsb2FkKSB7XG4gICAgc3RhdGUuZW1haWwgPSBwYXlsb2FkLmVtYWlsO1xuICAgIHN0YXRlLnVzZXJuYW1lID0gcGF5bG9hZC51c2VybmFtZTtcbiAgICBzdGF0ZS5yb2xlID0gcGF5bG9hZC5yb2xlO1xuICAgIHN0YXRlLmF2YXRhciA9IHBheWxvYWQuYXZhdGFyO1xuICAgIHN0YXRlLmlkID0gcGF5bG9hZC5pZDtcbiAgfSxcbiAgbG9nb3V0KHN0YXRlKSB7XG4gICAgc3RhdGUudXNlcm5hbWUgPSBcIlwiO1xuICAgIHN0YXRlLnJvbGUgPSBcIlwiO1xuICAgIHN0YXRlLmVtYWlsID0gXCJcIjtcbiAgICBzdGF0ZS5hdmF0YXIgPSBcIlwiO1xuICAgIHN0YXRlLmlkID0gXCJcIjtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBzdGF0ZSxcbiAgZ2V0dGVycyxcbiAgYWN0aW9ucyxcbiAgbXV0YXRpb25zXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9zdG9yZS9tb2R1bGVzL2FjY291bnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFKQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQVhBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUEzQkE7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBQ0E7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/store/modules/account.js\n");

/***/ })

})