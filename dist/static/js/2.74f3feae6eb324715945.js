webpackJsonp([2],{"1//9":function(t,e,s){"use strict";var n={props:{Time:String,Content:String}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box"},[e("div",{staticClass:"head"},[e("span",{staticStyle:{"font-size":"10px"}},[this._v(this._s(this.Time))])]),this._v(" "),e("div",{staticClass:"content"},[e("span",[this._v(this._s(this.Content))])])])},staticRenderFns:[]};var r=s("VU/8")(n,a,!1,function(t){s("IwiL")},"data-v-0b41e30c",null);e.a=r.exports},"87qc":function(t,e,s){"use strict";var n={props:{userInfo:Object},data:function(){return{}},methods:{}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("div",{staticClass:"leftbar",style:{backgroundImage:"url("+this.userInfo.avatar+")"}}),this._v(" "),e("div",{staticClass:"rightbar"},[e("span",[this._v(this._s(this.userInfo.username))])])])},staticRenderFns:[]};var r=s("VU/8")(n,a,!1,function(t){s("MF4B")},"data-v-d6d77004",null);e.a=r.exports},IwiL:function(t,e){},MF4B:function(t,e){},Pg8c:function(t,e,s){"use strict";e.c=function(t,e,s){return n.a.post("/chat/send",{fromId:t,toId:e,message:s})},e.a=function(t,e){return n.a.get("/chat/receive",{params:{fromId:t,toId:e}})},e.b=function(t){return n.a.get("/chat/sender",{params:{toId:t}})};var n=s("cKc3")},kRap:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),r=s("exGp"),c=s.n(r),i=s("87qc"),o=s("1//9"),u=(s("lrRS"),s("9pcb"),s("Pg8c")),d={components:{chatRemain:i.a,chatBox:o.a},data:function(){return{modal:!1,currentChat:{username:"",id:""},message:"",chats:[],userInfos:[]}},mounted:function(){var t=this;return c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$socket.emit("join",t.$store.state.account.id),e.next=3,t.getMessageSender();case 3:return e.next=5,t.receiveMessage();case 5:case"end":return e.stop()}},e,t)}))()},destroyed:function(){this.$socket.emit("disconnect")},methods:{handleChat:function(t){var e=this;return c()(a.a.mark(function s(){return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.currentChat=t,s.next=3,e.receiveMessage();case 3:case"end":return s.stop()}},s,e)}))()},select:function(t){return t.fromId!==this.currentChat.id?{onleft:!1,onright:!0}:{onleft:!0,onright:!1}},getMessageSender:function(){var t=this;return c()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(t.$store.state.account.id);case 2:s=e.sent,t.userInfos=s.data.data;case 4:case"end":return e.stop()}},e,t)}))()},sendMessage:function(){var t=this;return c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.message){e.next=8;break}return t.$socket.emit("sendmessage",t.currentChat.id),e.next=4,Object(u.c)(t.$store.state.account.id,t.currentChat.id,t.message);case 4:return e.next=6,t.receiveMessage();case 6:e.next=9;break;case 8:t.$message({type:"warning",message:"输入为空哦"});case 9:case"end":return e.stop()}},e,t)}))()},receiveMessage:function(){var t=this;return c()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(t.currentChat.id,t.$store.state.account.id);case 2:s=e.sent,t.chats=s.data.data,t.$nextTick(function(){var t=document.getElementById("msg");t.scrollTop=t.scrollHeight});case 5:case"end":return e.stop()}},e,t)}))()}},sockets:{receivemessage:function(){var t=c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.receiveMessage();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-box"},[s("div",{staticClass:"cleft"},t._l(t.userInfos,function(e){return s("chatRemain",{key:e.id,attrs:{userInfo:e},nativeOn:{click:function(s){return t.handleChat(e)}}})}),1),t._v(" "),s("div",{staticClass:"cright"},[s("div",{staticClass:"chathead"},[s("span",[t._v(t._s(t.currentChat.username))])]),t._v(" "),s("div",{staticClass:"chatarea",attrs:{id:"msg"}},t._l(t.chats,function(e){return s("chatBox",{key:e.id,class:t.select(e),attrs:{Time:e.time,Content:e.message}})}),1),t._v(" "),s("div",{staticClass:"foot"},[s("div",{staticClass:"inputitem",staticStyle:{"flex-basis":"75%"}},[s("el-input",{attrs:{placeholder:"Please Input",type:"textarea"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),t._v(" "),s("div",{staticClass:"inputitem",staticStyle:{"flex-basis":"25%"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.sendMessage}},[t._v("Send")])],1)])])])},staticRenderFns:[]};var h=s("VU/8")(d,f,!1,function(t){s("scfi")},"data-v-41fc0b08",null);e.default=h.exports},scfi:function(t,e){}});
//# sourceMappingURL=2.74f3feae6eb324715945.js.map