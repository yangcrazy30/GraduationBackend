webpackJsonp([7],{Mmdn:function(t,e){},PcOF:function(t,e){},WcO9:function(t,e,n){"use strict";e.d=function(t){return a.a.post("/bbs/post",{title:t.title,content:t.content})},e.b=function(){return a.a.get("/bbs/count")},e.a=function(t){return a.a.get("/bbs/post",{params:{id:t}})},e.c=function(t,e){return a.a.get("/bbs/search",{params:{config:t,title:e}})};var a=n("cKc3")},qjbD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),s=n("exGp"),i=n.n(s),o={props:{data:Object},data:function(){return{like:!1}},methods:{getLikeNum:function(){},handleLike:function(){this.like=!this.like,this.like?this.data.like=this.data.like+1:this.data.like=this.data.like-1}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bbsitem"},[n("div",{staticClass:"item"},[n("span",[t._v(t._s(t.data.fromUsername))]),t._v(" To\n    "),n("span",[t._v(t._s(t.data.toUsername))])]),t._v(" "),n("div",{staticClass:"item"},[n("span",[t._v(t._s(t.data.content))])]),t._v(" "),n("div",{staticClass:"item"},[n("i",{staticClass:"iconfont icon-diancai1-copy-copy",style:{color:t.like?"red":"gray"},on:{click:function(e){return e.stopPropagation(),t.handleLike(e)}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:0!==t.data.like,expression:"data.like !== 0"}]},[t._v(t._s(t.data.like))]),t._v(" "),n("span",[t._v(t._s(t.data.time))])])])},staticRenderFns:[]};var u=n("VU/8")(o,c,!1,function(t){n("PcOF")},null,null).exports,p=n("WcO9"),l=n("cKc3");function d(t,e){return l.a.get("/bbs/reply",{params:{config:t,postid:e}})}var f={components:{ReplyItem:u},data:function(){return{replyDialog:!1,post:{username:"",title:"",content:""},currentReply:"",form:{content:""},replys:[],currentPage:1,total:0,pageSize:4}},mounted:function(){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPostInfo();case 2:return e.next=4,t.updateCount();case 4:return e.next=6,t.updateReply({page:1,size:t.pageSize});case 6:case"end":return e.stop()}},e,t)}))()},methods:{handleReply:function(t){this.currentReply=t,this.replyDialog=!0},getPostInfo:function(){var t=this;return i()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(t.$route.params.postid);case 2:n=e.sent,t.post=n.data.data;case 4:case"end":return e.stop()}},e,t)}))()},handleCurrentChange:function(){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateReply({page:t.currentPage,size:t.pageSize},t.post.id);case 2:case"end":return e.stop()}},e,t)}))()},updateReply:function(t){var e=this;return i()(r.a.mark(function n(){var a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(t,e.post.id);case 2:a=n.sent,e.replys=a.data.data;case 4:case"end":return n.stop()}},n,e)}))()},updateCount:function(){var t=this;return i()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=t.post.id,l.a.get("/bbs/rcount",{params:{postid:a}});case 2:n=e.sent,t.total=n.data.data;case 4:case"end":return e.stop()}var a},e,t)}))()},sendReply:function(){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={postId:t.post.id,toId:t.currentReply,content:t.form.content},l.a.post("/bbs/reply",{replyinfo:n});case 2:return e.sent,e.next=5,t.updateReply({page:1,size:t.pageSize});case 5:return e.next=7,t.updateCount();case 7:t.form.content="",t.replyDialog=!1;case 9:case"end":return e.stop()}var n},e,t)}))()}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"secondarea"},[n("div",{staticClass:"maincotent"},[n("h1",{staticStyle:{margin:"0.5rem"}},[t._v(t._s(t.post.title))]),t._v(" "),n("p",{staticStyle:{margin:"0.5rem"}},[t._v(t._s(t.post.username))]),t._v(" "),n("span",{staticClass:"contentwrap",staticStyle:{margin:"0.5rem"}},[t._v(t._s(t.post.content))])]),t._v(" "),n("el-divider"),t._v(" "),n("div",{staticClass:"replybutton"},[n("el-button",{staticStyle:{float:"right",margin:"0.5rem"},attrs:{type:"primary"},on:{click:function(e){return t.handleReply(t.post.userId)}}},[t._v("Reply")])],1),t._v(" "),n("div",{staticClass:"reply"},t._l(t.replys,function(e){return n("ReplyItem",{key:e.id,attrs:{data:e},nativeOn:{click:function(n){return t.handleReply(e.fromId)}}})}),1),t._v(" "),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"Reply",visible:t.replyDialog,width:"30%"},on:{"update:visible":function(e){t.replyDialog=e}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",{attrs:{label:"回复"}},[n("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.replyDialog=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.sendReply}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(f,v,!1,function(t){n("Mmdn")},"data-v-9237af72",null);e.default=m.exports}});
//# sourceMappingURL=7.a47b9b11006b79d00986.js.map