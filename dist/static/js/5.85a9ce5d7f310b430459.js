webpackJsonp([5],{0:function(e,t){},"39St":function(e,t,r){"use strict";!function(){var t,o,n,a=0,s=[];for(o=0;o<256;o++)s[o]=(o+256).toString(16).substr(1);function i(){var e,r=(e=16,(!t||a+e>u.BUFFER_SIZE)&&(a=0,t=u.randomBytes(u.BUFFER_SIZE)),t.slice(a,a+=e));return r[6]=15&r[6]|64,r[8]=63&r[8]|128,r}function u(){var e=i();return s[e[0]]+s[e[1]]+s[e[2]]+s[e[3]]+"-"+s[e[4]]+s[e[5]]+"-"+s[e[6]]+s[e[7]]+"-"+s[e[8]]+s[e[9]]+"-"+s[e[10]]+s[e[11]]+s[e[12]]+s[e[13]]+s[e[14]]+s[e[15]]}u.BUFFER_SIZE=4096,u.bin=i,u.clearBuffer=function(){t=null,a=0},u.test=function(e){return"string"==typeof e&&/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(e)},"undefined"!=typeof crypto?n=crypto:"undefined"!=typeof window&&void 0!==window.msCrypto&&(n=window.msCrypto),n=n||r(0),e.exports=u,u.randomBytes=function(){if(n){if(n.randomBytes)return n.randomBytes;if(n.getRandomValues)return function(e){var t=new Uint8Array(e);return n.getRandomValues(t),t}}return function(e){var t,r=[];for(t=0;t<e;t++)r.push(Math.floor(256*Math.random()));return r}}()}()},GJ3N:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("Xxa5"),n=r.n(o),a=r("exGp"),s=r.n(a),i=r("lrRS"),u=r("Yf++"),c=r("39St"),m=r.n(c),l={props:{homework:Object},data:function(){return{grade:{status:""}}},mounted:function(){var e=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStatus();case 2:case"end":return t.stop()}},t,e)}))()},methods:{doHomework:function(){this.$emit("dowork",this.homework.id)},getStatus:function(){var e=this;return s()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.b)(e.homework.id);case 2:r=t.sent,e.grade=r.data.data;case 4:case"end":return t.stop()}},t,e)}))()}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("main",[r("h3",[r("span",[e._v(e._s(e.homework.name))])]),e._v(" "),r("p",[r("span",[e._v("开始时间 "+e._s(e.homework.startTime))])]),e._v(" "),r("p",[r("span",[e._v("结束时间 "+e._s(e.homework.endTime))])]),e._v(" "),r("p",[r("span",[e._v("状态 "+e._s(e.grade.status))])])]),e._v(" "),r("footer",{staticClass:"foot"},[r("span",[e._v(e._s("未完成"===e.grade.status?"未完成":e.grade.grade))]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.doHomework}},[e._v("查看")])],1)])},staticRenderFns:[]};var f={components:{HomeworkItem:r("VU/8")(l,d,!1,function(e){r("lwCI")},"data-v-5439f790",null).exports},data:function(){return{isCourseTeacher:!1,homeworkForm:{questions:[],time:[],name:""},options:[{value:0,label:"A"},{value:1,label:"B"},{value:2,label:"C"},{value:3,label:"D"}],homeworks:[]}},mounted:function(){var e=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkCourseTeacher();case 2:return t.next=4,e.getHomework();case 4:case"end":return t.stop()}},t,e)}))()},methods:{handleClick:function(e,t){},addHomeWork:function(){var e=this;return s()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.a)({name:e.homeworkForm.name,questions:e.homeworkForm.questions,startTime:e.homeworkForm.time[0],endTime:e.homeworkForm.time[1],courseId:e.$route.params.id});case 2:t.sent.data.success&&(e.$message({type:"success",message:"添加成功"}),e.homeworkForm={questions:[],time:[],name:""});case 4:case"end":return t.stop()}},t,e)}))()},checkCourseTeacher:function(){var e=this;return s()(n.a.mark(function t(){var r,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.d)(e.$route.params.id);case 2:r=t.sent,o=r.data.data.teacher===e.$store.state.account.email,e.isCourseTeacher=o;case 5:case"end":return t.stop()}},t,e)}))()},addQuestion:function(){this.homeworkForm.questions.push({id:m()(),value:"",options:"",answer:1})},removeQuestion:function(e){var t=this.homeworkForm.questions.indexOf(e);-1!==t&&this.homeworkForm.questions.splice(t,1)},doHomework:function(e){this.$router.push({name:"homeworkdetail",params:{homeworkid:e}})},getHomework:function(){var e=this;return s()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.c)(e.$route.params.id);case 2:r=t.sent,e.homeworks=r.data.data;case 4:case"end":return t.stop()}},t,e)}))()}},computed:{role:function(){return this.$store.state.account.role},activeName:function(){return this.isCourseTeacher?"second":"first"}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"secondarea"},[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.isCourseTeacher?e._e():r("el-tab-pane",{attrs:{label:"我的作业",name:"first"}},[r("div",{staticClass:"homeworks"},e._l(e.homeworks,function(t){return r("div",{key:t.id,staticStyle:{width:"25%",padding:"0.5rem"}},[r("HomeworkItem",{attrs:{homework:t},on:{dowork:e.doHomework}})],1)}),0)]),e._v(" "),e.isCourseTeacher?r("el-tab-pane",{attrs:{label:"发布作业",name:"second"}},[r("el-form",{ref:"homeworkForm",attrs:{model:e.homeworkForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"作业名称"}},[r("el-input",{attrs:{placeholder:"作业名称"},model:{value:e.homeworkForm.name,callback:function(t){e.$set(e.homeworkForm,"name",t)},expression:"homeworkForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"作业时间"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.homeworkForm.time,callback:function(t){e.$set(e.homeworkForm,"time",t)},expression:"homeworkForm.time"}})],1),e._v(" "),e._l(e.homeworkForm.questions,function(t,o){return r("el-form-item",{key:t.id,attrs:{label:"问题"+(o+1)}},[r("el-input",{attrs:{placeholder:"问题描述"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"question.value"}}),e._v(" "),r("el-input",{attrs:{placeholder:"选项（4个选项之间使用‘/’分隔，如'A/B/C/D'）"},model:{value:t.options,callback:function(r){e.$set(t,"options",r)},expression:"question.options"}}),e._v(" "),r("div",[r("el-select",{attrs:{placeholder:"正确答案"},model:{value:t.answer,callback:function(r){e.$set(t,"answer",r)},expression:"question.answer"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),r("el-button",{on:{click:function(r){return r.preventDefault(),e.removeQuestion(t)}}},[e._v("删除")])],1)],1)}),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.addHomeWork}},[e._v("发布")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addQuestion}},[e._v("新增问题")])],1)],2)],1):e._e()],1)],1)},staticRenderFns:[]};var h=r("VU/8")(f,p,!1,function(e){r("oUBU")},"data-v-2b07a612",null);t.default=h.exports},"Yf++":function(e,t,r){"use strict";t.a=function(e){return o.a.post("/homework/newhomework",{name:e.name,courseId:e.courseId,startTime:e.startTime,endTime:e.endTime,questions:e.questions})},t.c=function(e){return o.a.get("/homework/homework",{params:{courseId:e}})},t.d=function(e){return o.a.get("/homework/getbyid",{params:{homeworkId:e}})},t.e=function(e){return o.a.post("/homework/submit",{homeworkId:e.homeworkId,grade:e.grade})},t.b=function(e){return o.a.get("homework/status",{params:{homeworkId:e}})};var o=r("cKc3")},lwCI:function(e,t){},oUBU:function(e,t){}});
//# sourceMappingURL=5.85a9ce5d7f310b430459.js.map