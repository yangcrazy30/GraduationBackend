webpackJsonp([20],{"/3KD":function(e,t){},"9pcb":function(e,t,n){"use strict";t.d=function(e){return a.a.post("/users/signup",{username:e.username,email:e.email,password:e.password,role:e.role})},t.c=function(e){return a.a.post("/users/login",{email:e.email,password:e.password})},t.a=function(){return a.a.get("/users/userinfo")},t.e=function(e){return a.a.post("/users/userinfo",e)},t.b=function(e){return a.a.get("/users/uibyemail",{params:{email:e}})};var a=n("cKc3")},JXIJ:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("header",{staticClass:"head"},[n("div",{staticClass:"topmenu"},[n("div",{on:{click:e.jumpToHome}},[n("strong",{staticStyle:{padding:"0 1rem"}},[e._v("UJSOnline")])]),e._v(" "),n("div",{staticClass:"login"},[n("i",{staticClass:"iconfont icon-touxiang1",on:{click:e.jumpToProfile}}),e._v(" "),""===e.username?n("span",{on:{click:e.jumpToLogin}},[n("span",[e._v("my")]),e._v(" "),n("strong",[e._v("UJSOnline")]),e._v(" "),n("span",[e._v("connection")])]):n("span",{on:{click:e.jumpToProfile}},[n("strong",[e._v(e._s(e.username))]),e._v(" "),n("i",{staticClass:"iconfont icon-log-out",on:{click:e.logout}})])])]),e._v(" "),n("nav",[n("el-menu",{attrs:{mode:"horizontal","default-active":e.avtiveIndex,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleNavSelect}},[n("el-menu-item",{attrs:{index:"allcourse"}},[e._v("Course")])],1)],1)]),e._v(" "),n("router-view"),e._v(" "),e._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("footer",{staticClass:"footer"},[t("div",{staticClass:"botLogo"},[t("span",[this._v("University Of")]),this._v(" "),t("span",[this._v("JiangSu")])]),this._v(" "),t("div",{staticClass:"botMessage"})])}]};var o=n("VU/8")({name:"App",data:function(){return{avtiveIndex:"0",menus:[{}]}},methods:{handleNavSelect:function(e,t){this.$router.push({name:e})},jumpToLogin:function(){this.$router.push({path:"/signup"})},jumpToProfile:function(){this.$router.push({path:"/profile"})},jumpToHome:function(){"/"!==this.$route.path&&this.$router.push({path:"/"})},logout:function(){this.$store.dispatch("logout")}},computed:{username:function(){return this.$store.state.account.username}}},r,!1,function(e){n("JXIJ"),n("/3KD")},"data-v-7f5aebdb",null).exports,u=n("Gu7T"),i=n.n(u),s=n("lHA8"),c=n.n(s),l=n("/ocq"),p=n("NYxO"),m=n("Xxa5"),d=n.n(m),f=n("exGp"),h=n.n(f),v=n("9pcb"),b={state:{username:"",role:"",email:"",avatar:"",id:""},getters:{isLoggedIn:function(e){return!!e.email&&!!e.role}},actions:{login:function(e,t){var n=this,a=e.commit,r=e.getters,o=t.email,u=t.password;return h()(d.a.mark(function e(){var t,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isLoggedIn){e.next=2;break}return e.abrupt("return");case 2:if(!localStorage.getItem("ujs")){e.next=8;break}return e.next=5,Object(v.a)();case 5:return t=e.sent,a("login",t.data.data),e.abrupt("return");case 8:if(o&&u){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Object(v.c)({email:o,password:u});case 12:if(!(i=e.sent).data.success){e.next=19;break}return localStorage.setItem("ujs",i.data.data.token),a("login",i.data.data),e.abrupt("return",i);case 19:throw new Error(i.data.data.err);case 20:case"end":return e.stop()}},e,n)}))()},logout:function(e){var t=this,n=e.commit;return h()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n("logout");case 1:case"end":return e.stop()}},e,t)}))()},updateAvatar:function(e){var t=this,n=e.commit;return h()(d.a.mark(function e(){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)();case 2:a=e.sent,n("login",a.data.data);case 4:case"end":return e.stop()}},e,t)}))()},changeUserInfo:function(e,t){var n=this,a=e.commit;return h()(d.a.mark(function e(){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.e)(t);case 2:return e.next=4,Object(v.a)();case 4:r=e.sent,localStorage.setItem("ujs",r.data.data.token),a("login",r.data.data);case 7:case"end":return e.stop()}},e,n)}))()}},mutations:{login:function(e,t){e.email=t.email,e.username=t.username,e.role=t.role,e.avatar=t.avatar+"?r="+Math.random(),e.id=t.id},logout:function(e){e.username="",e.role="",e.email="",e.avatar="",e.id="",localStorage.clear()}}};a.default.use(p.a);var g=new p.a.Store({modules:{account:b}}),w=[{path:"/",component:function(){return Promise.all([n.e(0),n.e(16)]).then(n.bind(null,"KO1w"))}}],_=[{name:"allcourse",path:"/allcourse",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"YgBn"))}},{name:"course",path:"/course/:id",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"CWjW"))}}],k=[{path:"/login",component:function(){return n.e(11).then(n.bind(null,"EbLB"))}},{path:"/signup",component:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"SO18"))}}],x={path:"/study/:id",component:function(){return n.e(13).then(n.bind(null,"apb7"))},children:[{name:"study",path:"/",component:function(){return n.e(18).then(n.bind(null,"4Svj"))}},{name:"question",path:"question",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"rS5e"))}},{name:"homework",path:"homework",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"GJ3N"))}},{name:"bbs",path:"bbs",component:function(){return n.e(6).then(n.bind(null,"uS5C"))}},{path:"bbs/detail/:postid",name:"bbsdetail",component:function(){return n.e(7).then(n.bind(null,"qjbD"))}},{path:"homework/detail/:homeworkid",name:"homeworkdetail",component:function(){return n.e(10).then(n.bind(null,"a7WE"))}},{name:"resource",path:"resource",component:function(){return n.e(1).then(n.bind(null,"lIre"))}},{name:"management",path:"management",component:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,"G3Uz"))}}]},j={path:"/profile",component:function(){return n.e(14).then(n.bind(null,"tKlK"))},children:[{name:"setting",path:"setting",component:function(){return n.e(9).then(n.bind(null,"RI2B"))}},{name:"mycourse",path:"course",component:function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,"D7SI"))}},{name:"chat",path:"chat",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"kRap"))}}]};a.default.use(l.a);var S=new c.a(["/login","/signup","/"]),I=new l.a({routes:[].concat(i()(w),i()(_),i()(k),[j,x])});I.beforeEach(function(e,t,n){S.has(e.path)?n():g.getters.isLoggedIn?n():n({path:"/login",query:{redirect:e.fullPath}})});var P=I,L=n("zL8q"),O=n.n(L),C=(n("tvR6"),n("HI0L")),y=n.n(C),J=n("uJsh"),T=n.n(J);a.default.use(new y.a({debug:!1,connection:"http://101.200.209.120:3000"})),a.default.use(O.a),a.default.use(T.a),a.default.config.productionTip=!1,P.afterEach(function(e,t){window.scrollTo(0,0)}),new a.default({el:"#app",router:P,store:g,components:{App:o},template:"<App/>"})},bzuE:function(e,t,n){"use strict";var a={production:{baseURL:"http://101.200.209.120:3000"},development:{baseURL:"http://127.0.0.1:3000"}};t.a=a.production},cKc3:function(e,t,n){"use strict";var a=n("mtWM"),r=n.n(a),o=n("mw3O"),u=n.n(o),i=n("bzuE");r.a.defaults.baseURL=i.a.baseURL,r.a.defaults.withCredentials=!0,r.a.interceptors.request.use(function(e){return e.headers.common.Authorization="Bearer "+localStorage.getItem("ujs"),"get"===e.method&&(e.paramsSerializer=function(e){return u.a.stringify(e,{arrayFormat:"repeat"})}),e}),t.a=r.a},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.aa4c218afb7e390c0bc2.js.map