webpackJsonp([6],{Qec4:function(t,e){},WcO9:function(t,e,a){"use strict";e.d=function(t){return n.a.post("/bbs/post",{title:t.title,content:t.content})},e.b=function(){return n.a.get("/bbs/count")},e.a=function(t){return n.a.get("/bbs/post",{params:{id:t}})},e.c=function(t,e){return n.a.get("/bbs/search",{params:{config:t,title:e}})};var n=a("cKc3")},WmWR:function(t,e){},uS5C:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),s=a("exGp"),o=a.n(s),i={props:{data:Object},data:function(){return{like:!1}},methods:{getLikeNum:function(){},handleLike:function(){this.like=!this.like,this.like?this.data.like=this.data.like+1:this.data.like=this.data.like-1},handleClick:function(){this.$router.push({name:"bbsdetail",params:{postid:this.data.id}})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bbsitem",on:{click:t.handleClick}},[a("div",{staticClass:"item"},[a("h2",[t._v(t._s(t.data.title))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",[t._v(t._s(t.data.littleD))])]),t._v(" "),a("div",{staticClass:"item"},[a("i",{staticClass:"iconfont icon-diancai1-copy-copy",style:{color:t.like?"red":"gray"},on:{click:function(e){return e.stopPropagation(),t.handleLike(e)}}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0!==t.data.like,expression:"data.like !== 0"}]},[t._v(t._s(t.data.like))]),t._v(" "),a("span",[t._v(t._s(t.data.username))]),t._v(" "),a("span",[t._v(t._s(t.data.time))])])])},staticRenderFns:[]};var u=a("VU/8")(i,c,!1,function(t){a("Qec4")},null,null).exports,l=a("WcO9"),d={components:{BbsItem:u},data:function(){return{posts:[],dialogshow:!1,saerchkeyword:"",form:{title:"",content:""},currentPage:1,total:0,pageSize:4}},mounted:function(){var t=this;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleCurrentChange();case 2:return e.next=4,t.getPostCount();case 4:case"end":return e.stop()}},e,t)}))()},methods:{handleCurrentChange:function(t){var e=this;return o()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.c)({page:e.currentPage,size:e.pageSize},e.saerchkeyword);case 2:a=t.sent,e.posts=a.data.data;case 4:case"end":return t.stop()}},t,e)}))()},handlePost:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)({title:t.form.title,content:t.form.content});case 2:if(!e.sent.data.success){e.next=11;break}return t.dialogshow=!1,e.next=7,Object(l.c)({page:1,size:t.pageSize},"");case 7:return a=e.sent,e.next=10,t.getPostCount();case 10:t.posts=a.data.data;case 11:case"end":return e.stop()}},e,t)}))()},getPostCount:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)();case 2:a=e.sent,t.total=a.data.data;case 4:case"end":return e.stop()}},e,t)}))()},searchPost:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.c)({page:t.currentPage,size:t.pageSize},t.saerchkeyword);case 2:(a=e.sent).data.success&&(t.posts=a.data.data);case 4:case"end":return e.stop()}},e,t)}))()}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"secondarea"},[a("div",{staticClass:"button"},[a("el-input",{attrs:{placeholder:"请输入帖子名"},model:{value:t.saerchkeyword,callback:function(e){t.saerchkeyword=e},expression:"saerchkeyword"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.searchPost}},[t._v("Search")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.dialogshow=!0}}},[t._v("new")])],1),t._v(" "),a("ul",t._l(t.posts,function(t){return a("li",{key:t.id,staticClass:"post",attrs:{"data-index":t.id}},[a("BbsItem",{attrs:{data:t}})],1)}),0),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"New Post",visible:t.dialogshow,width:"30%"},on:{"update:visible":function(e){t.dialogshow=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Title"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Content"}},[a("el-input",{attrs:{type:"textarea",placeholder:"Content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogshow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handlePost}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(d,p,!1,function(t){a("WmWR"),a("uvNy")},"data-v-f18c283e",null);e.default=f.exports},uvNy:function(t,e){}});
//# sourceMappingURL=6.4ba32a5d1b47b8b82b3d.js.map